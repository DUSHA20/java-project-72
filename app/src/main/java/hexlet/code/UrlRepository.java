package hexlet.code;

import java.sql.SQLException;
import java.sql.Statement;
import java.sql.Connection;

public class UrlRepository extends BaseRepository {

    // Конструктор, который устанавливает соединение с базой данных
    public UrlRepository(Connection connection) {
        super(connection);
    }

    // Метод для инициализации базы данных и создания таблицы urls
    public void initializeDatabase() {
        try (Statement statement = connection.createStatement()) {
            String sql = "CREATE TABLE IF NOT EXISTS urls ("
                    + "id BIGINT GENERATED BY DEFAULT AS IDENTITY PRIMARY KEY,"
                    + "name VARCHAR(255) NOT NULL,"
                    + "created_at TIMESTAMP NOT NULL"
                    + ")";
            statement.executeUpdate(sql);
            System.out.println("Table 'urls' created successfully");
        } catch (SQLException e) {
            e.printStackTrace();
        }
    }
}
